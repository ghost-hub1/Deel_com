const template=(str,data)=>{const pattern=/<%=\s*([a-zA-Z]+)\s*%>/;for(;null!==(result=pattern.exec(str));){const record=data.find((item=>item.name===result[1]));str=str.replace(result[0],record?record.value:"")}return str};document.querySelectorAll(".subscribe-module").forEach((moduleEl=>{const{formId:formId}=moduleEl.dataset;let formData={};window.addEventListener("message",(event=>{if("hsFormCallback"===event.data.type&&event.data.id===formId){if("onFormSubmit"===event.data.eventName){formData=event.data.data;const submitButton=moduleEl.querySelector(".hs-submit .actions");submitButton.classList.add("active"),submitButton.innerHTML=submitButton.innerHTML+'<div class="spinner-container"><svg class="spinner" viewBox="0 0 50 50"><circle class="static" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle><circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle></svg></div>'}if("onFormSubmitted"===event.data.eventName){moduleEl.querySelectorAll("[data-post-submission]").forEach((el=>{el.innerHTML=template(el.dataset.postSubmission,formData)}));const resetButton=moduleEl.querySelector(".subscribe-module__disclaimer a");resetButton&&resetButton.addEventListener("click",(e=>{e.preventDefault(),window.location.reload()}))}}}))}));
//# sourceURL=https://cdn2.hubspot.net/hub/19498232/hub_generated/template_assets/74391954740/1653414006530/deel-ift2021/modules/Subscribe_Modules/common/scripts.js