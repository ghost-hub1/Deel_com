function dGetCookie(name){const parts=`; ${document.cookie}`.split(`; ${name}=`);if(2===parts.length)return parts.pop().split(";").shift()}function dSetCookie(name,value,days){const date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);const expires=`expires=${date.toUTCString()}`;document.cookie=`${name}=${value}; ${expires}; path=/; Secure; SameSite=Strict`}!function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(callback,thisArg){thisArg=thisArg||window;for(var i=0;i<this.length;i++)callback.call(thisArg,this[i],i,this)});var callback,nav=document.querySelector(".header__navigation"),langSwitcher=document.querySelector(".header__language-switcher"),search=document.querySelector(".header__search"),allToggles=document.querySelectorAll(".header--toggle"),navToggle=document.querySelector(".header__navigation--toggle"),langToggle=document.querySelector(".header__language-switcher--toggle"),searchToggle=document.querySelector(".header__search--toggle"),closeToggle=document.querySelector(".header__close--toggle"),allElements=document.querySelectorAll(".header--element, .header--toggle"),emailGlobalUnsub=document.querySelector('input[name="globalunsub"]');function toggleNav(){allToggles.forEach((function(toggle){toggle.classList.toggle("hide")})),nav.classList.toggle("open"),navToggle.classList.toggle("open"),closeToggle.classList.toggle("show")}function toggleLang(){allToggles.forEach((function(toggle){toggle.classList.toggle("hide")})),langSwitcher.classList.toggle("open"),langToggle.classList.toggle("open"),closeToggle.classList.toggle("show")}function toggleSearch(){allToggles.forEach((function(toggle){toggle.classList.toggle("hide")})),search.classList.toggle("open"),searchToggle.classList.toggle("open"),closeToggle.classList.toggle("show")}function closeAll(){allElements.forEach((function(element){element.classList.remove("hide","open")})),closeToggle.classList.remove("show")}function toggleDisabled(){document.querySelectorAll("#email-prefs-form .item").forEach((function(item){var emailSubItemInput=item.querySelector("input");emailGlobalUnsub.checked?(item.classList.add("disabled"),emailSubItemInput.setAttribute("disabled","disabled"),emailSubItemInput.checked=!1):(item.classList.remove("disabled"),emailSubItemInput.removeAttribute("disabled"))}))}callback=function(){document.body&&(langSwitcher&&langToggle.addEventListener("click",toggleLang),navToggle&&navToggle.addEventListener("click",toggleNav),searchToggle&&searchToggle.addEventListener("click",toggleSearch),closeToggle&&closeToggle.addEventListener("click",closeAll),emailGlobalUnsub&&emailGlobalUnsub.addEventListener("change",toggleDisabled))},["interactive","complete"].indexOf(document.readyState)>=0?callback():document.addEventListener("DOMContentLoaded",callback),$(document).ready((function(){const chatbot=$("#chatbot"),chatHeader=$(".chat-header"),chatBodyWrapper=$(".chat-body-wrapper"),chatBody=$(".chat-body"),chatClose=$(".chat-close"),chatContent=$("#chat-content"),initialMessage={text:"Hello, I'm Deel's virtual assistant.<br><br> Have more questions about Deel? Let me know how can I help?",ctas:[{text:"See Deel in Action",action:function(){setTimeout((()=>{hideLoading(),displayMessage({text:"Sure Thing! Try our guided platform tour and see how easy hiring and managing international teams can be.",ctas:[{text:"Start the tour",action:startTour},{text:"Start over",action:startOver,cssClass:"reset-conversation"}]})}),1e3)}},{text:"Book a demo",action:function(){showLoading(),setTimeout((()=>{hideLoading(),displayMessage({text:"Ready to get started? Schedule a 30 minute product demo and learn more about how Deel can help your business expand globally.",ctas:[{text:"Schedule Your Demo",action:redirectToDemoPage},{text:"Start over",action:startOver,cssClass:"reset-conversation"}]})}),1e3)}},{text:"Ask a question",action:function(){setTimeout((()=>{hideLoading(),displayMessage({text:"<p>You have questions and our global hiring experts have answers!<p><p>Schedule a 30 minute Q&A session and ask any and all international hiring questions you have.</p><p>From 'how do I hire 5 employees in Germany?' to 'how do we provide equity to our team in Hong Kong?'</p>",ctas:[{text:"Book a session now",action:redirectToQASession},{text:"Start over",action:startOver,cssClass:"reset-conversation"}]})}),1e3)}}]};let isChatInitialized=!1,expanded=!1;function displayMessage(message){chatContent.find(".response-wrapper").removeClass("active-prompt");const responseWrapper=$("<div>").addClass("response-wrapper active-prompt"),bubble=$("<div>").addClass("chat-bubble bot").html(message.text);if(responseWrapper.append(bubble),message.ctas){const ctaWrapper=$("<div>").addClass("cta-wrapper");message.ctas.forEach((cta=>{const button=$("<button>").addClass("cta-button").addClass(cta.cssClass||"").text(cta.text).on("click",(function(){!function(text,action){const userBubble=$("<div>").addClass("chat-bubble user").text(text);chatContent.append(userBubble),showLoading(),chatContent.find(".response-wrapper .cta-button").css("display","none"),setTimeout((()=>{action(),chatContent.find(".response-wrapper").removeClass("active-prompt"),chatContent.find(".response-wrapper").last().addClass("active-prompt")}),200)}(cta.text,cta.action)}));ctaWrapper.append(button)})),responseWrapper.append(ctaWrapper)}chatContent.append(responseWrapper),setTimeout(scrollToBottom,100)}function redirectToDemoPage(){window.location.href="https://www.deel.com/request-a-demo/"}function redirectToQASession(){window.location.href="https://www.deel.com/request-a-demo/?qa=1"}function startTour(){$(document).on("lity:open",(function(event,instance){instance.element().addClass("chatbot-using-lity")})),lity("https://capture.navattic.com/clv6tn0lx00010dl38gx3aerx"),hideLoading(),setTimeout((()=>{displayMessage({text:"Would you like to learn more?",ctas:[{text:"Book a Demo",action:redirectToQASession},{text:"Start Over",action:startOver,cssClass:"reset-conversation"}]})}),1e3)}function startOver(){chatContent.empty(),displayMessage(initialMessage)}function showLoading(){if(0===chatContent.find(".dot-pulse").length){const loadingIndicator=$("<div>").addClass("dot-pulse");chatContent.append(loadingIndicator)}setTimeout(scrollToBottom,100)}function hideLoading(){chatContent.find(".dot-pulse").remove(),setTimeout(scrollToBottom,100)}function scrollToBottom(){chatBody.animate({scrollTop:chatContent[0].scrollHeight},500)}chatHeader.on("click",(function(){chatBodyWrapper.slideToggle(),chatbot.toggleClass("is-chatbox-open"),expanded?($(chatbot).animate({width:"200px"},200),$(".chat-title span").text("Have questions?")):($(chatbot).animate({width:"350px"},100),$(".chat-title span").text("Deel")),expanded=!expanded,isChatInitialized||(displayMessage(initialMessage),isChatInitialized=!0)})),chatClose.on("click",".close-chat",(function(){chatBodyWrapper.slideToggle(),chatbot.toggleClass("is-chatbox-open")}))}));const urlCategories={"Deel Engage":["https://www.deel.com/engage","https://www.deel.com/engage/*"]};function urlMatchesPattern(url,pattern){return pattern.endsWith("*")?url.startsWith(pattern.slice(0,-1)):url===pattern}const currentUrl=window.location.href;let storedCategories=dGetCookie("deelProductInterest");storedCategories=storedCategories?JSON.parse(storedCategories):[];for(const[category,patterns]of Object.entries(urlCategories))for(const pattern of patterns)if(urlMatchesPattern(currentUrl,pattern)){storedCategories.includes(category)||storedCategories.push(category);break}dSetCookie("deelProductInterest",JSON.stringify(storedCategories),1),window.addEventListener("message",(function(event){if("hsFormCallback"===event.data.type&&"onFormReady"===event.data.eventName){const storedCategories=dGetCookie("deelProductInterest");storedCategories&&JSON.parse(storedCategories).forEach((category=>{const checkbox=document.querySelector(`input[type="checkbox"][value="${category}"]`);checkbox&&(checkbox.checked=!0)}))}}))}(),$(window).scroll((function(){body=document.querySelector("body"),$(this).scrollTop()>600?$("body").addClass("btn-open"):$("body").removeClass("btn-open")}));
//# sourceURL=https://cdn2.hubspot.net/hub/19498232/hub_generated/template_assets/54274783024/1718957880839/deel-ift2021/js/main.js